<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.60">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/vuepress-data-structure/favicon.svg"><title>位运算 | 算法和数据结构笔记</title><meta name="description" content="位运算">
    <link rel="preload" href="/vuepress-data-structure/assets/style-88453e02.css" as="style"><link rel="stylesheet" href="/vuepress-data-structure/assets/style-88453e02.css">
    <link rel="modulepreload" href="/vuepress-data-structure/assets/app-66d414da.js"><link rel="modulepreload" href="/vuepress-data-structure/assets/framework-d3922052.js"><link rel="modulepreload" href="/vuepress-data-structure/assets/bitwise-operation.html-9b5311e9.js"><link rel="modulepreload" href="/vuepress-data-structure/assets/bitwise-operation.html-4cbd9525.js"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-11cee170.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/algorithm-analysis.html-94914bd6.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/algorithm.html-4caef69f.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-11635407.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/stirling-s-approximation.html-4ba3995f.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/balanced-ternary.html-c361e3aa.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-25995bc5.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/symbol-definition.html-21cf9876.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/combination.html-a3af7fc7.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/combinatorial-identity.html-ab83b0ba.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/fibonacci.html-9905e99f.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-b85cf546.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/stirling-numbers.html-4cd19274.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/binary-algorithm.html-830f3a38.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/difference-arrays.html-44083472.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/fast-power.html-d259e3fa.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-293946e5.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/prefix-sum.html-a8f1faea.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-a01a88ba.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-e295df54.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/congruence-modulo.html-5b43c1d9.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/fermat-polygonal-number-theorem.html-32f3d710.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/gcd-and-lcm.html-26e4cb38.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-86152893.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/prime-sieve-method.html-6c1fd6fe.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-2a3e70f3.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/cauchy-inequality.html-d6a276c4.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-52ffdac5.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/mean-inequality.html-30f3689e.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-cb9d109e.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/number-sequence-intro.html-6f42a4fa.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/inclusion-exclusion-principle.html-a8dd82c3.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-eab18928.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/set.html-1b179741.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/0-1-backpack.html-6c30f330.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/complete-backpack.html-508b5854.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-7f25146d.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-a9dec447.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/algorithm-analysis.html-002255d0.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/algorithm.html-dc87127c.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-b71f57c0.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/stirling-s-approximation.html-dd60bf29.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/balanced-ternary.html-77401b4f.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-80b9dce6.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/symbol-definition.html-5f8432d2.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/combination.html-6c38c12d.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/combinatorial-identity.html-069bee7b.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/fibonacci.html-2d0e92ac.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-e58bd2d4.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/stirling-numbers.html-904dba9a.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/binary-algorithm.html-89d53bb2.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/difference-arrays.html-051151ec.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/fast-power.html-8c2ed93e.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-28212f5e.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/prefix-sum.html-f70fe55a.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-7d01d20d.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-31df72d1.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/congruence-modulo.html-6f246ac7.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/fermat-polygonal-number-theorem.html-a510b0fa.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/gcd-and-lcm.html-9476bcd4.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-c63cdea4.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/prime-sieve-method.html-71561fa5.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-310a343b.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/cauchy-inequality.html-458fe529.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-477d8019.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/mean-inequality.html-039b288a.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-6cc85309.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/number-sequence-intro.html-7aae5878.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/inclusion-exclusion-principle.html-7e698e09.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-f55922b5.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/set.html-a2701290.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/0-1-backpack.html-a8130590.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/complete-backpack.html-c29371e3.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/index.html-fa47d3bc.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/404.html-0c700c04.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/mermaid.esm.min-bc08675d.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/mermaid-mindmap.esm.min-e7154ca1.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/SearchResult-14917ad4.js" as="script"><link rel="prefetch" href="/vuepress-data-structure/assets/Catalog-bb879577.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/vuepress-data-structure/" class=""><img class="logo" src="/vuepress-data-structure/favicon.svg" alt="算法和数据结构笔记"><span class="site-name can-hide">算法和数据结构笔记</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/Sun-ZhenXing/vuepress-data-structure/" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><button class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg></button><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/Sun-ZhenXing/vuepress-data-structure/" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="位运算" tabindex="-1"><a class="header-anchor" href="#位运算" aria-hidden="true">#</a> 位运算</h1><nav class="table-of-contents"><ul><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_1-位运算的功能" class="router-link-active router-link-exact-active">1. 位运算的功能</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_2-位运算优先级" class="router-link-active router-link-exact-active">2. 位运算优先级</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_3-位运算详解" class="router-link-active router-link-exact-active">3. 位运算详解</a><ul><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_3-1-按位与" class="router-link-active router-link-exact-active">3.1 按位与</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_3-2-按位或" class="router-link-active router-link-exact-active">3.2 按位或</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_3-3-异或" class="router-link-active router-link-exact-active">3.3 异或</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_3-4-按位取反" class="router-link-active router-link-exact-active">3.4 按位取反</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_3-5-左移" class="router-link-active router-link-exact-active">3.5 左移</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_3-6-右移" class="router-link-active router-link-exact-active">3.6 右移</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_3-7-无符号右移" class="router-link-active router-link-exact-active">3.7 无符号右移</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_3-8-公式总结" class="router-link-active router-link-exact-active">3.8 公式总结</a></li></ul></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_4-位运算总结" class="router-link-active router-link-exact-active">4. 位运算总结</a><ul><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_4-1-交换两个数" class="router-link-active router-link-exact-active">4.1 交换两个数</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_4-2-快速最小公倍数" class="router-link-active router-link-exact-active">4.2 快速最小公倍数</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_4-3-判断奇偶" class="router-link-active router-link-exact-active">4.3 判断奇偶</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_4-4-符号相同" class="router-link-active router-link-exact-active">4.4 符号相同</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_4-5-第-i-1-位" class="router-link-active router-link-exact-active">4.5 第 i+1 位</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_4-6-最低有效位" class="router-link-active router-link-exact-active">4.6 最低有效位</a></li><li><a aria-current="page" href="/vuepress-data-structure/common-algorithms/bitwise-operation.html#_4-7-绝对值" class="router-link-active router-link-exact-active">4.7 绝对值</a></li></ul></li></ul></nav><h2 id="_1-位运算的功能" tabindex="-1"><a class="header-anchor" href="#_1-位运算的功能" aria-hidden="true">#</a> 1. 位运算的功能</h2><p><span class="badge tip" style="vertical-align:middle;"><!--[-->定义<!--]--></span> <strong>位运算</strong> 是基于整数的二进制表示进行的运算。从编程者的角度还是数字之间的运算，而计算机本身就是使用二进制进行运算，所以效率相当高。</p><p>位操作是多数 CPU 支持的基本操作，大多数 CPU 指令集中均支持不同类型的位运算。</p><p>我们先观察 x86 的指令语法，注释后面是等价的 C 语言语句：</p><table><thead><tr><th>汇编代码</th><th>C 代码</th></tr></thead><tbody><tr><td><code>xor a, b</code></td><td><code>a ^= b;</code></td></tr><tr><td><code>or a, b</code></td><td><code>a |= b;</code></td></tr><tr><td><code>and a, b</code></td><td><code>a &amp;= b;</code></td></tr><tr><td><code>not a </code></td><td><code>~a;</code></td></tr></tbody></table><p>我们发现这些汇编指令和 C 语言的语句是一一对应的。说明它足够底层高效，见代码即知汇编。</p><p>注意不同语言的位运算是有区别的</p><ul><li>C/C++ 是由编译器处理的的，溢出不在运行时报错，但编译会报告 <code>warning</code></li><li>Java 不支持超过范围的左移操作</li><li>JavaScript 除了大整数外，将所有的数字存储为 <code>64</code> 位浮点数，操作之前先将所有数字转换为 <code>signed int32</code> 类型，因此即使是浮点数也可以参与位运算，对于超过精度的数字会取模，对于非整数会转换为整数</li><li>Python 的左移是无限精度的，不会出现符号变化，但如果对于大整数的左移会使程序卡死（因为程序尝试使用更大的空间表示这个巨无霸数字）</li></ul><div class="hint-container warning"><p class="hint-container-title">混用有符号数</p><p>不要混合使用有符号数和无符号数字进行位运算或比较运算，可能导致灾难！也不要使用不同大小（位宽度）的类型进行比较和位运算，虽然大多数情况下编译器会为你纠正！</p></div><p>下面所说的所有技巧都是可以用但未必一定要用的技巧，你不必为了追求代码的高效而降低代码的可读性，这是得不偿失的，而且编译器做的优化会比你想象的充分。大多数场合下，你不必为每一个字节、每一个指令做优化。</p><h2 id="_2-位运算优先级" tabindex="-1"><a class="header-anchor" href="#_2-位运算优先级" aria-hidden="true">#</a> 2. 位运算优先级</h2><p>以 C/C++ 为例，优先级如下</p><ol><li><code>~</code> 按位取反</li><li><code>+ -</code> 加减</li><li><code>&lt;&lt; &gt;&gt;</code> 位移</li><li><code>&amp;</code> 按位与</li><li><code>^</code> 异或</li><li><code>|</code> 按位或</li></ol><blockquote><p>不同语言的运算符优先级略有区别，总体如上所示。</p></blockquote><h2 id="_3-位运算详解" tabindex="-1"><a class="header-anchor" href="#_3-位运算详解" aria-hidden="true">#</a> 3. 位运算详解</h2><h3 id="_3-1-按位与" tabindex="-1"><a class="header-anchor" href="#_3-1-按位与" aria-hidden="true">#</a> 3.1 按位与</h3><p><code>a &amp; b</code> 表示将相应的二进制位执行 <strong>与</strong> 运算后输出结果，因此两个负数执行后是负数，否则都是正数。</p><div class="language-c" data-ext="c"><pre class="language-c"><code><span class="token number">194</span>      <span class="token operator">=</span> <span class="token number">0</span>b11000010
<span class="token number">73</span>       <span class="token operator">=</span> <span class="token number">0</span>b01001001
<span class="token number">194</span> <span class="token operator">&amp;</span> <span class="token number">73</span> <span class="token operator">=</span> <span class="token number">0</span>b01000000 <span class="token operator">=</span> <span class="token number">64</span>
</code></pre></div><ul><li>常元律 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mi>a</mi><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mtext> </mtext><mo stretchy="false">(</mo><mo>∼</mo><mn>0</mn><mo stretchy="false">)</mo><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mi>a</mi><mo>=</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">0\ \&amp;\ a = 0,\,(\sim 0)\ \&amp;\ a = a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">0</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">)</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></li><li>交换律 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mi>b</mi><mo>=</mo><mi>b</mi><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mi>a</mi></mrow><annotation encoding="application/x-tex">a\ \&amp;\ b = b\ \&amp;\ a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mord mathnormal">a</span></span></span></span></li><li>结合律 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mi>b</mi><mo stretchy="false">)</mo><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mi>c</mi><mo>=</mo><mi>a</mi><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mo stretchy="false">(</mo><mi>b</mi><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mi>c</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(a\ \&amp;\ b)\ \&amp;\ c =a \ \&amp;\ (b\ \&amp;\ c)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mord mathnormal">c</span><span class="mclose">)</span></span></span></span></li><li>等幂律 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mi>a</mi><mo>=</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">a\ \&amp;\ a = a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></li><li><strong>不满足</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo stretchy="false">)</mo><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mi>c</mi><mo>=</mo><mo stretchy="false">(</mo><mi>a</mi><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mi>c</mi><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mi>b</mi><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mi>c</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(a + b)\ \&amp;\ c = (a\ \&amp;\ c) + (b\ \&amp;\ c)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mord mathnormal">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mord mathnormal">c</span><span class="mclose">)</span></span></span></span></li></ul><blockquote><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∼</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\sim 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 等于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>，在位运算中相等于被操作数每一位都是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，即对于 32 位整数，表示 <code>0xffffffff</code>。</p></blockquote><div class="hint-container tip"><p class="hint-container-title">技巧 1：取模</p><p>有的时候我们要取模的值可以表示为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>，我们发现 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext> </mtext><mi mathvariant="normal">%</mi><mtext> </mtext><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">a\ \%\ 2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mord">%</span><span class="mspace"> </span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a\ \&amp;\ (2^n-1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span> 的值总是一样的，而取模的操作的低效的（编译器也可能帮你优化），这个时候可以优化性能。例如，你需要计算 <code>a % 4</code>，你总是可以直接计算 <code>a &amp; 3</code>。</p></div><div class="hint-container tip"><p class="hint-container-title">技巧 2：位设置</p><p>还有一个用处就是当你需要对数字 <code>a</code> 的某一个位设置为 <code>0</code>，那么使用 <code>a &amp; 0b1111011111111111</code>，下面也会指出更简洁的方法。</p></div><h3 id="_3-2-按位或" tabindex="-1"><a class="header-anchor" href="#_3-2-按位或" aria-hidden="true">#</a> 3.2 按位或</h3><p><code>a | b</code> 表示将相应的二进制位执行 <strong>或</strong> 运算后输出结果，因此有一个负数那么结果是负数，都是正数才是正数。</p><div class="language-c" data-ext="c"><pre class="language-c"><code><span class="token number">194</span>      <span class="token operator">=</span> <span class="token number">0</span>b11000010
<span class="token number">73</span>       <span class="token operator">=</span> <span class="token number">0</span>b01001001
<span class="token number">194</span> <span class="token operator">&amp;</span> <span class="token number">73</span> <span class="token operator">=</span> <span class="token number">0</span>b11001011 <span class="token operator">=</span> <span class="token number">203</span>
</code></pre></div><ul><li>常元律 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mi>a</mi><mo>=</mo><mi>a</mi><mo separator="true">,</mo><mtext> </mtext><mo stretchy="false">(</mo><mo>∼</mo><mn>0</mn><mo stretchy="false">)</mo><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mi>a</mi><mo>=</mo><mo>∼</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">0\ |\ a = a,\,(\sim 0)\ |\ a = \sim 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">)</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></li><li>交换律 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mi>b</mi><mo>=</mo><mi>b</mi><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mi>a</mi></mrow><annotation encoding="application/x-tex">a\ |\ b = b\ |\ a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mord mathnormal">a</span></span></span></span></li><li>结合律 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mi>b</mi><mo stretchy="false">)</mo><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mi>c</mi><mo>=</mo><mi>a</mi><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mo stretchy="false">(</mo><mi>b</mi><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mi>c</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(a\ |\ b)\ |\ c =a \ |\ (b\ |\ c)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mord mathnormal">c</span><span class="mclose">)</span></span></span></span></li><li>等幂律 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mi>a</mi><mo>=</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">a\ |\ a = a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></li><li><strong>不满足</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo stretchy="false">)</mo><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mi>c</mi><mo>=</mo><mo stretchy="false">(</mo><mi>a</mi><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mi>c</mi><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><mi>b</mi><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mi>c</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(a + b)\ |\ c = (a\ |\ c) + (b\ |\ c)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mord mathnormal">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mord mathnormal">c</span><span class="mclose">)</span></span></span></span></li></ul><div class="hint-container tip"><p class="hint-container-title">技巧 1：位设置</p><p>当你需要将某一个位设置为 <code>1</code>，那么你可以使用 <code>a | 0b00001000</code>。</p></div><h3 id="_3-3-异或" tabindex="-1"><a class="header-anchor" href="#_3-3-异或" aria-hidden="true">#</a> 3.3 异或</h3><p><code>a ^ b</code> 异或的每一个二进制位是两个二进制位相等时为 <code>0</code>，不同时为 <code>1</code>。</p><blockquote><p>注意，部分语言如 VB，用 <code>^</code> 表示幂，而用 <code>XOR</code> 表示异或。</p></blockquote><div class="language-c" data-ext="c"><pre class="language-c"><code><span class="token number">194</span>      <span class="token operator">=</span> <span class="token number">0</span>b11000010
<span class="token number">73</span>       <span class="token operator">=</span> <span class="token number">0</span>b01001001
<span class="token number">194</span> <span class="token operator">^</span> <span class="token number">73</span> <span class="token operator">=</span> <span class="token number">0</span>b10001011 <span class="token operator">=</span> <span class="token number">139</span>
</code></pre></div><p>我们用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⊕</mo></mrow><annotation encoding="application/x-tex">\oplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">⊕</span></span></span></span> 表示异或</p><ul><li>常元律 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mtext> </mtext><mo>⊕</mo><mtext> </mtext><mi>a</mi><mo>=</mo><mi>a</mi><mo separator="true">,</mo><mtext> </mtext><mo stretchy="false">(</mo><mo>∼</mo><mn>0</mn><mo stretchy="false">)</mo><mtext> </mtext><mo>⊕</mo><mtext> </mtext><mi>a</mi><mo>=</mo><mo>∼</mo><mi>a</mi><mo separator="true">,</mo><mtext> </mtext><mi>a</mi><mtext> </mtext><mo>⊕</mo><mtext> </mtext><mi>a</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">0\ \oplus\ a = a,\,(\sim 0)\ \oplus\ a = \sim a,\,a\ \oplus\ a = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">)</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></li><li>交换律 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext> </mtext><mo>⊕</mo><mtext> </mtext><mi>b</mi><mo>=</mo><mi>b</mi><mtext> </mtext><mo>⊕</mo><mtext> </mtext><mi>a</mi></mrow><annotation encoding="application/x-tex">a\ \oplus\ b = b\ \oplus\ a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">b</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></li><li>结合律 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mtext> </mtext><mo>⊕</mo><mtext> </mtext><mi>b</mi><mo stretchy="false">)</mo><mtext> </mtext><mo>⊕</mo><mtext> </mtext><mi>c</mi><mo>=</mo><mi>a</mi><mtext> </mtext><mo>⊕</mo><mtext> </mtext><mo stretchy="false">(</mo><mi>b</mi><mtext> </mtext><mo>⊕</mo><mtext> </mtext><mi>c</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(a\ \oplus\ b)\ \oplus\ c =a \ \oplus\ (b\ \oplus\ c)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mclose">)</span></span></span></span></li><li>自反律 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext> </mtext><mo>⊕</mo><mtext> </mtext><mi>b</mi><mtext> </mtext><mo>⊕</mo><mtext> </mtext><mi>b</mi><mo>=</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">a\ \oplus\ b\ \oplus\ b = a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">b</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></li><li><strong>不满足</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo stretchy="false">)</mo><mtext> </mtext><mo>⊕</mo><mtext> </mtext><mi>c</mi><mo>=</mo><mi>a</mi><mtext> </mtext><mo>⊕</mo><mtext> </mtext><mi>c</mi><mo>+</mo><mi>b</mi><mtext> </mtext><mo>⊕</mo><mtext> </mtext><mi>c</mi></mrow><annotation encoding="application/x-tex">(a + b)\ \oplus\ c = a\ \oplus\ c + b\ \oplus\ c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">b</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span></li></ul><p>设</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munderover><mo>⨁</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><msub><mi>a</mi><mn>1</mn></msub><mo>⊕</mo><msub><mi>a</mi><mn>2</mn></msub><mo>⊕</mo><mo>⋯</mo><mo>⊕</mo><msub><mi>a</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex"> \bigoplus_{i=1}^n{a_i} = a_1 \oplus a_2 \oplus \cdots \oplus a_n </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">⨁</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>这表示对数组 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的数计算累计异或。</p><div class="hint-container tip"><p class="hint-container-title">技巧 1：找不同</p><p>异或可以用来找不同，依据如下性质</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⊕</mo><mi>a</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">a \oplus a = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⊕</mo><mn>0</mn><mo>=</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">a \oplus 0 = a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></li></ul><p>给定一个数组，除了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 每个数字都出现两次，那么所有数字异或后为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>，因为一个数字异或两次就是 <code>0</code>。</p></div><div class="hint-container tip"><p class="hint-container-title">技巧 2：位设置</p><p>你也可以使用异或翻转某个特定的二进制位，例如 <code>a ^ 0b00000100000</code>。</p></div><h3 id="_3-4-按位取反" tabindex="-1"><a class="header-anchor" href="#_3-4-按位取反" aria-hidden="true">#</a> 3.4 按位取反</h3><div class="language-c" data-ext="c"><pre class="language-c"><code><span class="token number">123</span>  <span class="token operator">=</span>  <span class="token number">0</span>b1111011
<span class="token operator">~</span><span class="token number">123</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0</span>b1111100 <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">124</span>
</code></pre></div><p><code>~a</code> 将每一个二进制取反，不考虑符号位，因此执行两次后这个数字还是原数 <code>~~x == x</code>。计算效果上相当于计算 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mi>a</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-a-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>。</p><div class="hint-container tip"><p class="hint-container-title">技巧 1：位取反</p><p>你需要对全部二进制位取反，或者你想计算 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mi>a</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-a-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 的时候，使用 <code>~a</code>。</p><p>例如 <code>~123 = -124</code>，<code>~-124 = 123</code>。</p></div><h3 id="_3-5-左移" tabindex="-1"><a class="header-anchor" href="#_3-5-左移" aria-hidden="true">#</a> 3.5 左移</h3><p><code>a &lt;&lt; b</code>，逻辑左移跟算术左移完全一样，将所有二进制位向左移动，右边补 <code>0</code>。效果相当于这个数字乘上 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">2^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 为左移的位数。</p><div class="language-c" data-ext="c"><pre class="language-c"><code><span class="token number">123</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">984</span>
</code></pre></div><div class="hint-container tip"><p class="hint-container-title">技巧 1：计算幂</p><p>考虑到位移的意义，你可以使用左移进行快速乘法</p><ul><li>如果你想计算 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>×</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">a \times 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>，那么只需 <code>a &lt;&lt; 1</code>，因为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mo>=</mo><msup><mn>2</mn><mn>1</mn></msup></mrow><annotation encoding="application/x-tex">4 = 2^1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></li><li>如果你想计算 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>×</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">a \times 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span></span></span></span>，那么只需 <code>a &lt;&lt; 3</code>，因为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mo>=</mo><msup><mn>2</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">8 = 2^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></li></ul><p>有符号数的符号位也参与运算，因此最高位如果进入符号位，这个数字的符号会发生变化。</p></div><h3 id="_3-6-右移" tabindex="-1"><a class="header-anchor" href="#_3-6-右移" aria-hidden="true">#</a> 3.6 右移</h3><div class="language-c" data-ext="c"><pre class="language-c"><code><span class="token number">12345</span> <span class="token operator">&gt;&gt;</span> <span class="token number">6</span> <span class="token operator">=</span> <span class="token number">192</span>
</code></pre></div><p><code>a &gt;&gt; b</code> 表示右移，逻辑右移跟算术右移则不一样。</p><p>大多数语言 <strong>对有符号数实行算数右移，对无符号数实行逻辑右移</strong>。算数右移和逻辑右移唯一的区别是，最高位补的数字是什么：</p><ul><li>逻辑右移一律补 <code>0</code></li><li>算数右移在最高位是 <code>1</code> 时补 <code>1</code>，在最高位是 <code>0</code> 时补 <code>0</code></li></ul><p>右移的效果相当于这个数字除以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">2^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 为右移的位数。</p><div class="hint-container tip"><p class="hint-container-title">技巧 1：快速除法</p><p>快速执行除法</p><ul><li>如果你想计算 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">a / 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mord">/2</span></span></span></span>，那么只需 <code>a &gt;&gt; 1</code>，因为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn><mo>=</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">1/2 = 2^{-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1/2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></li><li>如果你想计算 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi mathvariant="normal">/</mi><mn>8</mn></mrow><annotation encoding="application/x-tex">a / 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mord">/8</span></span></span></span>，那么只需 <code>a &gt;&gt; 3</code>，因为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>8</mn><mo>=</mo><msup><mn>2</mn><mrow><mo>−</mo><mn>3</mn></mrow></msup></mrow><annotation encoding="application/x-tex">1/8 = 2^{-3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1/8</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span></li></ul></div><h3 id="_3-7-无符号右移" tabindex="-1"><a class="header-anchor" href="#_3-7-无符号右移" aria-hidden="true">#</a> 3.7 无符号右移</h3><p><code>a &gt;&gt;&gt; b</code> 无符号右移，Java 和 JavaScript 支持无符号右移。无符号右移是对有符号数补 <code>0</code>。因此执行后都是正数，除了移动 <code>0</code> 位。</p><div class="language-java" data-ext="java"><pre class="language-java"><code><span class="token operator">-</span><span class="token number">123</span>       <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0b1111011</span>
<span class="token number">3</span>          <span class="token operator">=</span>  <span class="token number">0b0000011</span>
<span class="token operator">-</span><span class="token number">123</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">3</span> <span class="token operator">=</span>  <span class="token number">0b11111111111111111111111110000</span> <span class="token operator">=</span> <span class="token number">536870896</span>
</code></pre></div><blockquote><p>大多数语言没有无符号右移，如果你希望右移总是无符号的，请使用无符号数字参与运算。</p></blockquote><h3 id="_3-8-公式总结" tabindex="-1"><a class="header-anchor" href="#_3-8-公式总结" aria-hidden="true">#</a> 3.8 公式总结</h3><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>x</mi><mo>⊕</mo><mi>y</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><mo>∼</mo><mi>x</mi><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mi>y</mi><mo stretchy="false">)</mo><mo>∣</mo><mo stretchy="false">(</mo><mi>x</mi><mtext> </mtext><mi mathvariant="normal">&amp;</mi><mtext> </mtext><mo>∼</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo>−</mo><mi>a</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mtext> </mtext><mo>∼</mo><mi>a</mi><mo>+</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex"> \begin{aligned} x \oplus y &amp;= (\sim x\ \&amp;\ y) \mid (x\ \&amp;\ \sim y) \\ -a &amp;= \ \sim a + 1 \\ \end{aligned} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.75em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathnormal">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.75em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">x</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace"> </span><span class="mord">&amp;</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace"> </span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.25em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><h2 id="_4-位运算总结" tabindex="-1"><a class="header-anchor" href="#_4-位运算总结" aria-hidden="true">#</a> 4. 位运算总结</h2><h3 id="_4-1-交换两个数" tabindex="-1"><a class="header-anchor" href="#_4-1-交换两个数" aria-hidden="true">#</a> 4.1 交换两个数</h3><div class="language-cpp" data-ext="cpp"><pre class="language-cpp"><code>a <span class="token operator">^=</span> b<span class="token punctuation">;</span>
b <span class="token operator">^=</span> a<span class="token punctuation">;</span>
a <span class="token operator">^=</span> b<span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-2-快速最小公倍数" tabindex="-1"><a class="header-anchor" href="#_4-2-快速最小公倍数" aria-hidden="true">#</a> 4.2 快速最小公倍数</h3><div class="language-cpp" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">gcd</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>b <span class="token operator">^=</span> a <span class="token operator">^=</span> b <span class="token operator">^=</span> a <span class="token operator">%=</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-3-判断奇偶" tabindex="-1"><a class="header-anchor" href="#_4-3-判断奇偶" aria-hidden="true">#</a> 4.3 判断奇偶</h3><p>根据 <code>a &amp; 1</code> 等价于 <code>a % 2</code>。</p><h3 id="_4-4-符号相同" tabindex="-1"><a class="header-anchor" href="#_4-4-符号相同" aria-hidden="true">#</a> 4.4 符号相同</h3><p><code>a ^ b &gt;= 0</code></p><h3 id="_4-5-第-i-1-位" tabindex="-1"><a class="header-anchor" href="#_4-5-第-i-1-位" aria-hidden="true">#</a> 4.5 第 <code>i+1</code> 位</h3><ul><li>取出值 <code>a &amp; (1 &lt;&lt; i)</code></li><li>置一 <code>a |= 1 &lt;&lt; i</code></li><li>置零 <code>a &amp;= ~(1 &lt;&lt; i)</code></li><li>翻转 <code>a ^ (1 &lt;&lt; i)</code></li></ul><h3 id="_4-6-最低有效位" tabindex="-1"><a class="header-anchor" href="#_4-6-最低有效位" aria-hidden="true">#</a> 4.6 最低有效位</h3><ul><li>获取最低有效位 <code>a &amp; (-a) = a &amp; (~a + 1)</code></li></ul><blockquote><p>参考 <a href="https://www.jianshu.com/p/7faf7c22c146" target="_blank" rel="noopener noreferrer">位运算的性质和应用<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h3 id="_4-7-绝对值" tabindex="-1"><a class="header-anchor" href="#_4-7-绝对值" aria-hidden="true">#</a> 4.7 绝对值</h3><div class="language-cpp" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LL_SIZE_M1</span> <span class="token expression"><span class="token keyword">sizeof</span><span class="token punctuation">(</span>ll<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">8</span> <span class="token operator">-</span> <span class="token number">1</span></span></span>

<span class="token keyword">inline</span> ll <span class="token function">llabs</span><span class="token punctuation">(</span>ll a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>a <span class="token operator">^</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;&gt;</span> LL_SIZE_M1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;&gt;</span> LL_SIZE_M1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里 <code>LL_SIZE_M1</code> 应当被编译器优化为常数。</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/Sun-ZhenXing/vuepress-data-structure//edit/main/docs/common-algorithms/bitwise-operation.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1006925066@qq.com">Sun-ZhenXing</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!----><!--]--></div>
    <script type="module" src="/vuepress-data-structure/assets/app-66d414da.js" defer></script>
  </body>
</html>
